{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended",
    ":dependencyDashboard",
    ":semanticCommits",
    ":timezone(Asia/Jakarta)",
    "schedule:weekly"
  ],
  "labels": ["dependencies"],
  "commitMessagePrefix": "chore(deps):",
  "configMigration": true,
  "pnpm": {
    "enabled": true
  },
  "lockFileMaintenance": {
    "enabled": true,
    "schedule": ["before 9am on monday"]
  },
  "packageRules": [
    {
      "description": "Auto-merge minor and patch updates",
      "matchUpdateTypes": ["minor", "patch"],
      "automerge": true,
      "automergeType": "pr",
      "platformAutomerge": true
    },
    {
      "description": "Do not automerge major updates",
      "matchUpdateTypes": ["major"],
      "automerge": false,
      "labels": ["dependencies", "breaking-change"]
    },
    {
      "description": "Group Cloudflare packages",
      "groupName": "cloudflare",
      "matchPackagePatterns": ["^wrangler", "^@cloudflare/", "^miniflare"]
    },
    {
      "description": "Group Hono packages",
      "groupName": "hono",
      "matchPackagePatterns": ["^hono", "^@hono/"]
    },
    {
      "description": "Group TanStack packages",
      "groupName": "tanstack",
      "matchPackagePatterns": ["^@tanstack/"]
    },
    {
      "description": "Group Radix UI packages",
      "groupName": "radix-ui",
      "matchPackagePatterns": ["^@radix-ui/"]
    },
    {
      "description": "Group Drizzle packages",
      "groupName": "drizzle",
      "matchPackagePatterns": ["^drizzle-"]
    },
    {
      "description": "Group React packages",
      "groupName": "react",
      "matchPackageNames": ["react", "react-dom", "@types/react", "@types/react-dom"]
    },
    {
      "description": "Group Vitest packages",
      "groupName": "vitest",
      "matchPackagePatterns": ["^vitest", "^@vitest/"]
    },
    {
      "description": "Group Biome packages",
      "groupName": "biome",
      "matchPackagePatterns": ["^@biomejs/"]
    },
    {
      "description": "Group Tailwind packages",
      "groupName": "tailwind",
      "matchPackagePatterns": ["^tailwindcss", "^@tailwindcss/", "^autoprefixer", "^postcss"]
    },
    {
      "description": "Group GitHub Actions",
      "groupName": "github-actions",
      "matchManagers": ["github-actions"]
    },
    {
      "description": "Pin zod to v3.x (v4 has breaking changes)",
      "matchPackageNames": ["zod"],
      "allowedVersions": "<4.0.0"
    },
    {
      "description": "Lock React at v18 until we're ready for v19",
      "matchPackageNames": ["react", "react-dom", "@types/react", "@types/react-dom"],
      "allowedVersions": "<19.0.0"
    },
    {
      "description": "Lock Vite at v5 (v6+ has breaking changes)",
      "matchPackageNames": ["vite"],
      "allowedVersions": "<6.0.0"
    },
    {
      "description": "Lock Vitest at v2 (v3+ requires Vite 6)",
      "matchPackageNames": ["vitest", "@vitest/ui", "@vitest/coverage-v8"],
      "allowedVersions": "<3.0.0"
    },
    {
      "description": "Lock Biome at v1 (v2 has config changes)",
      "matchPackageNames": ["@biomejs/biome"],
      "allowedVersions": "<2.0.0"
    }
  ],
  "ignorePaths": ["**/node_modules/**"]
}
