# Dependabot configuration for automated dependency updates
# Docs: https://docs.github.com/en/code-security/dependabot/dependabot-version-updates

version: 2
updates:
  # Root package.json (shared devDependencies)
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
      timezone: "Asia/Jakarta"
    open-pull-requests-limit: 10
    groups:
      dev-tools:
        patterns: ["@biomejs/*", "typescript", "tsx", "vitest", "@vitest/*"]
      database:
        patterns: ["drizzle-*", "better-sqlite3"]
    commit-message:
      prefix: "chore(deps)"

  # ERP Dashboard (Frontend)
  - package-ecosystem: "npm"
    directory: "/apps/erp-dashboard"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
      timezone: "Asia/Jakarta"
    open-pull-requests-limit: 10
    groups:
      tanstack:
        patterns: ["@tanstack/*"]
      shadcn-ui:
        patterns: ["@radix-ui/*", "class-variance-authority", "clsx", "tailwind-merge"]
      tailwind:
        patterns: ["tailwindcss", "@tailwindcss/*", "autoprefixer", "postcss"]
      react:
        patterns: ["react", "react-dom", "@types/react", "@types/react-dom"]
    commit-message:
      prefix: "chore(deps)"

  # API Gateway
  - package-ecosystem: "npm"
    directory: "/services/api-gateway"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
      timezone: "Asia/Jakarta"
    open-pull-requests-limit: 5
    groups:
      cloudflare:
        patterns: ["wrangler", "@cloudflare/*", "miniflare"]
      hono:
        patterns: ["hono", "@hono/*"]
    commit-message:
      prefix: "chore(deps)"

  # Product Service
  - package-ecosystem: "npm"
    directory: "/services/product-service"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
      timezone: "Asia/Jakarta"
    open-pull-requests-limit: 5
    groups:
      cloudflare:
        patterns: ["wrangler", "@cloudflare/*", "miniflare"]
      hono:
        patterns: ["hono", "@hono/*"]
      database:
        patterns: ["drizzle-*"]
    commit-message:
      prefix: "chore(deps)"

  # Inventory Service
  - package-ecosystem: "npm"
    directory: "/services/inventory-service"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
      timezone: "Asia/Jakarta"
    open-pull-requests-limit: 5
    groups:
      cloudflare:
        patterns: ["wrangler", "@cloudflare/*", "miniflare"]
      hono:
        patterns: ["hono", "@hono/*"]
      database:
        patterns: ["drizzle-*"]
    commit-message:
      prefix: "chore(deps)"

  # Order Service
  - package-ecosystem: "npm"
    directory: "/services/order-service"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
      timezone: "Asia/Jakarta"
    open-pull-requests-limit: 5
    groups:
      cloudflare:
        patterns: ["wrangler", "@cloudflare/*", "miniflare"]
      hono:
        patterns: ["hono", "@hono/*"]
      database:
        patterns: ["drizzle-*"]
    commit-message:
      prefix: "chore(deps)"

  # Business Partner Service
  - package-ecosystem: "npm"
    directory: "/services/business-partner-service"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
      timezone: "Asia/Jakarta"
    open-pull-requests-limit: 5
    groups:
      cloudflare:
        patterns: ["wrangler", "@cloudflare/*", "miniflare"]
      hono:
        patterns: ["hono", "@hono/*"]
      database:
        patterns: ["drizzle-*"]
    commit-message:
      prefix: "chore(deps)"

  # Accounting Service
  - package-ecosystem: "npm"
    directory: "/services/accounting-service"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
      timezone: "Asia/Jakarta"
    open-pull-requests-limit: 5
    groups:
      cloudflare:
        patterns: ["wrangler", "@cloudflare/*", "miniflare"]
      hono:
        patterns: ["hono", "@hono/*"]
      database:
        patterns: ["drizzle-*"]
    commit-message:
      prefix: "chore(deps)"

  # Payment Service
  - package-ecosystem: "npm"
    directory: "/services/payment-service"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
      timezone: "Asia/Jakarta"
    open-pull-requests-limit: 5
    groups:
      cloudflare:
        patterns: ["wrangler", "@cloudflare/*", "miniflare"]
      hono:
        patterns: ["hono", "@hono/*"]
      database:
        patterns: ["drizzle-*"]
    commit-message:
      prefix: "chore(deps)"

  # Shipping Service
  - package-ecosystem: "npm"
    directory: "/services/shipping-service"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
      timezone: "Asia/Jakarta"
    open-pull-requests-limit: 5
    groups:
      cloudflare:
        patterns: ["wrangler", "@cloudflare/*", "miniflare"]
      hono:
        patterns: ["hono", "@hono/*"]
      database:
        patterns: ["drizzle-*"]
    commit-message:
      prefix: "chore(deps)"

  # GitHub Actions
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
      timezone: "Asia/Jakarta"
    commit-message:
      prefix: "chore(deps)"
